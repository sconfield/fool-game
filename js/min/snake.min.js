!function(){var t,e,o,n,i,r,a,s,d,h,f,u,c,m={}.hasOwnProperty,p=function(t,e){function o(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};s=18,d=100,h="slow",o=0,t=1,n=2,a=3,e=function(t){function e(){return f=e.__super__.constructor.apply(this,arguments)}return p(e,t),e}(Backbone.Model),i=function(t){function o(){return u=o.__super__.constructor.apply(this,arguments)}return p(o,t),o.prototype.model=e,o}(Backbone.Collection),$.extend({move:function(t,e){var o;return $(e).hasClass("item0")?$(e).hide(h,function(){return $(this).removeClass().removeData("item")}):(o=$(e).data("item")-1,$(e).removeClass().addClass("snake item"+o).data("item",o))},reverseDom:function(t){var e,o,n;for(e=t.toArray(),o=e.length,n=[];o--;)n.push(e[o]);return $(n)}}),$.fn.extend({createSnake:function(t){var e,o,n;for(e=1,n=[];t--;)o=s-e++,n.push($(this).eq(t).find("div").addClass("item"+o+" snake").data("item",o).show());return n},moveSnake:function(){return $(this).find("div.snake").each(function(t,e){return $.move(t,e)})},findSnakeHead:function(){return $(this).find("div.item"+(s-1)).closest("td")},createSnakeHead:function(){return $(this).find("div").addClass("snake item"+s).data("item",s).show()},filterSnakeBody:function(){return $(this).filter(":lt("+($(this).size()-1)+")")},findSnakeItemCount:function(){return $(this).find("div.snake").size()}}),r=function(r){function d(){return c=d.__super__.constructor.apply(this,arguments)}return p(d,r),d.prototype.tagName="div",d.prototype.className="snake",d.prototype.initialize=function(){var t;for(_.bindAll(this,"render","moveLeft","moveBottom"),this.direction=o,this.$tblMap=$("table.base-map>tbody"),this.$leftRoad=this.$tblMap.find("tr:first>td"),this.$bottomRoad=this.$tblMap.find("tr").find("td:last"),this.$rightRoad=$.reverseDom(this.$tblMap.find("tr:last>td")),this.$topRoad=$.reverseDom(this.$tblMap.find("tr").find("td:first")),t=s,this.collection=new i;t--;)this.collection.add(new e);return this.render()},d.prototype.render=function(){return this.$leftRoad.createSnake(s)},d.prototype.moveCtrl=function(){return this.direction===o?this.moveLeft():this.direction===t?this.moveBottom():this.direction===n?this.moveRight():this.direction===a?this.moveTop():void 0},d.prototype.moveLeft=function(){var e,o;return this.$topRoad.findSnakeItemCount()&&this.$topRoad.filterSnakeBody().moveSnake(),o=this.$leftRoad.findSnakeHead(),e=o.next(),e.createSnakeHead(),this.$leftRoad.moveSnake(),e.size()?void 0:(this.direction=t,this.$bottomRoad.createSnake(2))},d.prototype.moveBottom=function(){var t,e;return this.$leftRoad.findSnakeItemCount()&&this.$leftRoad.filterSnakeBody().moveSnake(),e=this.$bottomRoad.findSnakeHead(),t=e.closest("tr").next().find("td:last"),t.createSnakeHead(),this.$bottomRoad.moveSnake(),t.size()?void 0:(this.direction=n,this.$rightRoad.createSnake(2))},d.prototype.moveRight=function(){var t,e;return this.$bottomRoad.findSnakeItemCount()&&this.$bottomRoad.filterSnakeBody().moveSnake(),e=this.$rightRoad.findSnakeHead(),t=e.prev(),t.createSnakeHead(),this.$rightRoad.moveSnake(),t.size()?void 0:(this.direction=a,this.$topRoad.createSnake(2))},d.prototype.moveTop=function(){var t,e;return this.$rightRoad.findSnakeItemCount()&&this.$rightRoad.filterSnakeBody().moveSnake(),e=this.$topRoad.findSnakeHead(),t=e.closest("tr").prev().find("td:first"),t.createSnakeHead(),this.$topRoad.moveSnake(),t.size()?void 0:(this.direction=o,this.$leftRoad.createSnake(2))},d}(Backbone.View),$(document).ready(function(){var t;return t=new r,window.setInterval(function(){return t.moveCtrl()},d)})}.call(this);