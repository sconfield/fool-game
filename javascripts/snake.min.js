!function(){var t,e,r,n,i,a,o,s,d,l,u={}.hasOwnProperty,p=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=18,a=100,o="slow",n="table.base-map>tbody",$.extend({reverseDom:function(t){var e,r,n;for(e=t.toArray(),r=e.length,n=[];r--;)n.push(e[r]);return $(n)}}),$.fn.extend({getRealRoad:function(){return $(this).filter(":gt(0)")}}),t=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return p(e,t),e}(Backbone.Model),e=function(e){function r(){return d=r.__super__.constructor.apply(this,arguments)}return p(r,e),r.prototype.model=t,r}(Backbone.Collection),r=function(r){function s(){return l=s.__super__.constructor.apply(this,arguments)}return p(s,r),s.prototype.tagName="div",s.prototype.className="snake",s.prototype.initialize=function(){var r,a,o,s,d,l;for(_.bindAll(this,"render","move","letsgo"),s=$(n),a=s.find("tr:first>td").getRealRoad(),r=s.find("tr").find("td:last").getRealRoad(),o=$.reverseDom(s.find("tr:last>td")).getRealRoad(),d=$.reverseDom(s.find("tr").find("td:first")).getRealRoad(),this.$road=$.merge($.merge($.merge(a,r),o),d).addClass("snake-road"),l=i,this.collection=new e;l--;)this.collection.add(new t);return this.render()},s.prototype.render=function(){var t,e;for(t=this.collection.length,e=[];t--;)e.push(this.$road.eq(t).find("div").addClass("item"+t+" snake").data("item",t).css("visibility","visible"));return e},s.prototype.letsgo=function(){var t;return t=this.move,setInterval(function(){return t()},a)},s.prototype.move=function(){var t,e,r;return e=this.$road.find("div.item"+(this.collection.length-1)).parent(),r=this.$road.index(e),t=this.$road.eq(r+1),t.find("div").addClass("snake item"+this.collection.length).data("item",this.collection.length).css("visibility","visible"),this.$road.find("div.snake").each(function(){var t;return $(this).hasClass("item0")?$(this).hide(o,function(){return $(this).css({visibility:"hide",display:"block"}).removeClass().removeData("item")}):(t=$(this).data("item")-1,$(this).removeClass().addClass("snake item"+t).data("item",t))})},s}(Backbone.View),$(document).ready(function(){var t;return t=new r,t.letsgo()})}.call(this);