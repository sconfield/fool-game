!function(){var t,e,n,r,i,o,a,s,d,l,c={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=18,o=100,a="slow",r="table.base-map>tbody",$.extend({reverseDom:function(t){var e,n,r;for(e=t.toArray(),n=e.length,r=[];n--;)r.push(e[n]);return $(r)}}),$.fn.extend({getRealRoad:function(){return $(this).filter(":gt(0)")}}),t=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e}(Backbone.Model),e=function(e){function n(){return d=n.__super__.constructor.apply(this,arguments)}return u(n,e),n.prototype.model=t,n}(Backbone.Collection),n=function(n){function s(){return l=s.__super__.constructor.apply(this,arguments)}return u(s,n),s.prototype.tagName="div",s.prototype.className="snake",s.prototype.initialize=function(){var n,o,a,s,d,l;for(_.bindAll(this,"render","move","letsgo"),s=$(r),o=s.find("tr:first>td").getRealRoad(),n=s.find("tr").find("td:last").getRealRoad(),a=$.reverseDom(s.find("tr:last>td")).getRealRoad(),d=$.reverseDom(s.find("tr").find("td:first")).getRealRoad(),this.$road=$.merge($.merge($.merge(o,n),a),d),l=i,this.collection=new e;l--;)this.collection.add(new t);return this.render()},s.prototype.render=function(){var t,e;for(t=this.collection.length,e=[];t--;)e.push(this.$road.eq(t).find("div").addClass("item"+t+" snake").data("item",t).css("visibility","visible"));return e},s.prototype.letsgo=function(){var t;return t=this.move,setInterval(function(){return t()},o)},s.prototype.move=function(){var t,e,n;return e=this.$road.find("div.item"+(this.collection.length-1)).parent(),n=this.$road.index(e),t=this.$road.eq(n+1),t.find("div").addClass("snake item"+this.collection.length).data("item",this.collection.length).css("visibility","visible"),this.$road.find("div.snake").each(function(){var t;return $(this).hasClass("item0")?$(this).hide(a,function(){return $(this).css({visibility:"hide",display:"block"}).removeClass().removeData("item")}):(t=$(this).data("item")-1,$(this).removeClass().addClass("snake item"+t).data("item",t))})},s}(Backbone.View),$(document).ready(function(){var t;return t=new n,t.letsgo()})}.call(this);